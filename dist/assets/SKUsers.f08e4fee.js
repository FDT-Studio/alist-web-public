import{at as q,bW as D,d as k,a as O,h as e,B as y,M as N,i as P,b5 as E,j as L,k as V,br as h,bf as f,I as U,bh as z,bi as H,bj as R,bk as W,bl as j,bm as X,bn as K,t as S,bo as Y,bp as A,bq as G,bU as J,m as Q,q as Z,b as ee,aO as b,b1 as m,ab as _,a3 as re,Y as te,cu as ne,cv as ae,cw as v,cx as I,cy as se,cz as u,b2 as C,n as le,V as oe,bX as ce}from"./index.741c1b30.js";import{o as ue,b as ie}from"./index.d75e2fc6.js";import{F as de,a as ge}from"./FolderTree.a9dddcf2.js";import{W as he}from"./Wether.c2e7de4f.js";import"./index.004f1e30.js";var M=(t=>(t[t.COMMON=0]="COMMON",t[t.PREMIUM=1]="PREMIUM",t))(M||{});const be=[{name:"Common",value:M.COMMON},{name:"Premium",value:M.PREMIUM}],me=t=>{const{isOpen:l,onOpen:p,onClose:i}=q(),[s,o]=D(t.user),[x,d]=k(!1),a=O();return[e(y,{id:"skuser_change",onclick:p,get children(){return a("global.edit")}}),e(Z,{size:"xl",get opened(){return l()},onClose:i,get children(){return[e(N,{}),e(P,{get children(){return[e(E,{}),e(L,{get children(){return a("global.edit")}}),e(V,{get children(){return[e(h,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[e(f,{for:"username",display:"flex",alignItems:"center",get children(){return a("users.username")}}),e(U,{id:"username",get value(){return s.username},disabled:!0})]}}),e(h,{w:"$full",display:"flex",flexDirection:"column",get children(){return[e(f,{for:"role",display:"flex",alignItems:"center",get children(){return a("users.role")}}),e(z,{get defaultValue(){return s.role},onChange:n=>o("role",n),get children(){return[e(H,{get children(){return[e(R,{get children(){return a("users.role")}}),e(W,{}),e(j,{})]}}),e(X,{get children(){return e(K,{get children(){return e(S,{each:be,children:n=>e(Y,{get value(){return n.value},get children(){return[e(A,{get children(){return n.name}}),e(G,{})]}})})}})}})]}})]}}),e(h,{w:"$full",display:"flex",flexDirection:"column",get children(){return[e(f,{for:"base_path",display:"flex",alignItems:"center",get children(){return a("users.base_path")}}),e(de,{id:"base_path",get value(){return s.base_path},onChange:n=>o("base_path",n)})]}}),e(h,{w:"fit-content",display:"flex",get children(){return e(J,{css:{whiteSpace:"nowrap"},id:"disabled",get defaultChecked(){return t.user.disabled},color:"$neutral10",fontSize:"$sm",onChange:n=>o("disabled",n.currentTarget.checked),get children(){return a("users.disabled")}})}})]}}),e(Q,{get children(){return e(y,{get loading(){return x()},onClick:async()=>{d(!0),t.onChange(s),d(!1),i()},get children(){return a("global.confirm")}})}})]}})]}})]},pe=t=>{const l=[{name:"general",color:"info"},{name:"premium",color:"warning"}];return e(ce,{get colorScheme(){return l[t.role].color},get children(){return l[t.role].name}})},xe=()=>{const t=O();ue("manage.sidemenu.skunkgirl_users"),ee();const[l,p]=b(()=>m.get("/admin/skuser/list")),[i,s]=k([]),o=async()=>{const r=await p();C(r,c=>s(c.content))};o();const[x,d]=b(r=>m.post("/admin/skuser/update",r)),[a,n]=b(r=>m.get("/admin/skuser/update_settings?basepath="+r)),[B,T]=b(r=>m.get("/admin/skuser/get_by_username?username="+r)),[g,$]=k(""),w=async()=>{const r=await T(g());C(r,c=>s(c.content))};return e(oe,{spacing:"$2",alignItems:"start",w:"$full",get children(){return[e(_,{spacing:"$2",get children(){return[e(y,{colorScheme:"accent",get loading(){return l()},onClick:o,get children(){return t("global.refresh")}}),e(ge,{id:"base_path",get showText(){return t("users.set_default_base_path")},onChange:r=>n(r)}),e(U,{id:"search-input",get value(){return g()},onInput:r=>{$(r.currentTarget.value)},onKeyDown:r=>{r.key==="Enter"&&g().length!==0&&w()}}),e(re,{flexShrink:0,"aria-label":"search",get icon(){return e(ie,{})},onClick:()=>w(),get loading(){return B()},get disabled(){return g().length===0}})]}}),e(te,{w:"$full",overflowX:"auto",get children(){return e(ne,{highlightOnHover:!0,dense:!0,get children(){return[e(ae,{get children(){return e(v,{get children(){return[e(S,{each:["username","base_path","role","available"],children:r=>e(I,{get children(){return t(`users.${r}`)}})}),e(I,{get children(){return t("global.operations")}})]}})}}),e(se,{get children(){return e(S,{get each(){return i()},children:r=>e(v,{get children(){return[e(u,{get children(){return r.username}}),e(u,{get children(){return r.base_path}}),e(u,{get children(){return e(pe,{get role(){return r.role}})}}),e(u,{get children(){return e(he,{get yes(){return!r.disabled}})}}),e(u,{get children(){return e(_,{spacing:"$2",get children(){return e(me,{user:r,onChange:c=>{d(c).then(F=>{C(F,()=>{le.success(t("global.save_success"))})})}})}})}})]}})})}})]}})}})]}})};export{xe as default};
