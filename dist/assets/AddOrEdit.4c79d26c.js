import{a as f,b as x,bW as $,aO as o,b1 as g,h as t,V as C,bC as v,br as i,bf as h,t as k,B as F,b2 as m,n as I,Z as S,bD as T,ag as d,I as D,cc as L,T as E,bU as M,S as B,F as H}from"./index.41bce360.js";import{F as b}from"./FolderTree.75d33dab.js";import"./index.bf51f9b1.js";const O=e=>{const r=f();return t(i,{w:"$full",display:"flex",flexDirection:"column",get children(){return[t(h,{get for(){return e.name},display:"flex",alignItems:"center",get children(){return r(`metas.${e.name}`)}}),t(T,{w:"$full",get direction(){return e.type==="bool"?"row":{"@initial":"column","@md":"row"}},gap:"$2",get children(){return[d(()=>d(()=>e.type==="string",!0)()?t(D,{get id(){return e.name},get value(){return e.value},onInput:n=>e.onChange(n.currentTarget.value)}):d(()=>e.type==="bool",!0)()?t(L,{get id(){return e.name},get checked(){return e.value},onChange:n=>e.onChange(n.currentTarget.checked)}):t(E,{get id(){return e.name},get value(){return e.value},onChange:n=>e.onChange(n.currentTarget.value)})),t(i,{w:"fit-content",display:"flex",get children(){return t(M,{css:{whiteSpace:"nowrap"},get id(){return`${e.name}_sub`},onChange:n=>e.onSub(n.currentTarget.checked),color:"$neutral10",fontSize:"$sm",get checked(){return e.sub},get children(){return r("metas.apply_sub")}})}})]}}),t(B,{get when(){return e.help},get children(){return t(H,{get children(){return r(`metas.${e.name}_help`)}})}})]}})},A=()=>{const e=f(),{params:r,back:n}=x(),{id:u}=r,[l,s]=$({id:0,path:"",thumbnail_path:"",password:"",p_sub:!1,write:!1,w_sub:!1,hide:"",h_sub:!1,readme:"",r_sub:!1,header:"",header_sub:!1}),[p,y]=o(()=>g.get(`/admin/meta/get?id=${u}`));u&&(async()=>{const a=await y();m(a,s)})();const[w,_]=o(()=>g.post(`/admin/meta/${u?"update":"create"}`,l));return t(S,{get loading(){return p()},get children(){return t(C,{w:"$full",alignItems:"start",spacing:"$2",get children(){return[t(v,{get children(){return e(`global.${u?"edit":"add"}`)}}),t(i,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[t(h,{for:"path",display:"flex",alignItems:"center",get children(){return e("metas.path")}}),t(b,{id:"path",get value(){return l.path},onChange:a=>s("path",a)})]}}),t(i,{w:"$full",display:"flex",flexDirection:"column",get children(){return[t(h,{for:"thumbnail_path",display:"flex",alignItems:"center",get children(){return e("metas.thumbnail_path")}}),t(b,{id:"thumbnail_path",get value(){return l.thumbnail_path},onChange:a=>s("thumbnail_path",a)})]}}),t(k,{each:[{name:"password",type:"string",sub:"p_sub"},{name:"write",type:"bool",sub:"w_sub"},{name:"hide",type:"text",sub:"h_sub",help:!0},{name:"header",type:"text",sub:"header_sub",help:!0},{name:"readme",type:"text",sub:"r_sub",help:!0}],children:a=>t(O,{get name(){return a.name},get type(){return a.type},get value(){return l[a.name]},onChange:c=>s(a.name,c),get sub(){return l[a.sub]},onSub:c=>s(a.sub,c),get help(){return a.help}})}),t(F,{get loading(){return w()},onClick:async()=>{const a=await _();m(a,()=>{I.success(e("global.save_success")),n()})},get children(){return e(`global.${u?"save":"add"}`)}})]}})}})};export{A as default};
